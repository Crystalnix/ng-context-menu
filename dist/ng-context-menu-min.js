"ng-context-menu - v1.0.1 - An AngularJS directive to display a context menu\nwhen a right-click event is triggered\n\n@author Ian Kennington Walter (http:/ /ianvonwalter.com)";angular.module("ng-context-menu",[]).factory("ContextMenuService",function(){return{element:null,menuElement:null}}).directive("contextMenu",["$document","ContextMenuService",function(e,n){return{restrict:"A",scope:{callback:"&contextMenu",closeCallback:"&contextMenuClose",disabled:"=contextMenuDisabled"},link:function(t,l,c){var o,u,i,a,r;r=!1,a=function(n,t){var l,c,o,u,i,a,m,d,p,s,f;t.addClass("open"),l=e[0].documentElement,o=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),u=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),m=t[0].scrollWidth,a=t[0].scrollHeight,i=l.clientWidth+o,c=l.clientHeight+u,f=m+n.pageX,s=a+n.pageY,d=Math.max(n.pageX-o,0),p=Math.max(n.pageY-u,0),f>i&&(d-=f-i),s>c&&(p-=s-c),t.css("top",p+"px"),t.css("left",d+"px"),r=!0},o=function(e){e.removeClass("open"),r&&t.closeCallback(),r=!1},i=function(e){!t.disabled&&r&&27===e.keyCode&&t.$apply(function(){return o(n.menuElement)})},u=function(e){t.disabled||!r||2===e.button&&e.target===n.element||t.$apply(function(){return o(n.menuElement)})},l.bind("contextmenu",function(e){t.disabled||(null!==n.menuElement&&o(n.menuElement),n.menuElement=angular.element(document.getElementById(c.target)),n.element=e.target,e.preventDefault(),e.stopPropagation(),t.$apply(function(){return t.callback({$event:e})}),t.$apply(function(){return a(e,n.menuElement)}))}),e.bind("keyup",i),e.bind("click",u),e.bind("contextmenu",u),t.$on("$destroy",function(){e.unbind("keyup",i),e.unbind("click",u),e.unbind("contextmenu",u)})}}}]);